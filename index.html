<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bon Appétit</title>
    <style></style>
</head>

<body>


    <body>

        <section id="modal">

            <div id="modal-content">
                <button>Close</button>
                <h2 class="modal-navn"></h2>
                <img class="modal-billede" src="" alt="">
                <p class="modal-langbeskrivelse"></p>

            </div>
        </section>



        <header>
            <h1>Bon Appétit</h1>
            <h2>Menu</h2>
            <nav>
                <button class="menu-item" data-menu="forretter">Forretter</button>
                <button class="menu-item" data-menu="hovedretter">Hovedretter</button>
                <button class="menu-item" data-menu="desserter">Desserter</button>
            </nav>
        </header>


        <section class="ret-display"> </section>






        <template class="ret-template">
            <article>
                <h2 class="ret-navn"> </h2>
                <img class="ret-billede" src="" alt="">
                <p class="ret-kortbeskrivelse"> </p>
                <p class="ret-pris"> </p>
                <p class="ret-kategori"> </p>
                <p class="ret-kategori"> </p>
            </article>
        </template>

        <script>
            let retter = [];
            let kategoriFilter = "alle";


            document.addEventListener("DOMContentLoaded", start);

            function start() {
                hentJson();
                forberedFiltrering();

            }

            function forberedFiltrering() {
                document.querySelectorAll("nav button").forEach(knap => {
                    knap.addEventListener("click", () => {


                        kategoriFilter = knap.getAttribute("data-menu");
                        visRetter();
                    });
                });

            }



            async function hentJson() {
                let jsonData = await fetch("menu.json");
                retter = await jsonData.json();
                visRetter();
            }



            function visRetter() {
                // globale variabeler
                let display = document.querySelector(".ret-display");
                let temp = document.querySelector(".ret-template");

                display.textContent = "";

                retter.forEach(ret => {

                    if (ret.kategori == kategoriFilter || kategoriFilter == "alle") {
                        console.log(ret.kategori, kategoriFilter);


                        let klon = temp.cloneNode(true).content;


                        klon.querySelector("h2").textContent = ret.navn;
                        klon.querySelector(".ret-billede").src = "imgs/" + ret.billede + ".jpg";
                        ret.billede.jpg;

                        klon.querySelector("img").addEventListener("click", () => {
                            visModal(ret);
                        });

                        klon.querySelector(".ret-billede").alt = "billede af" + ret.navn;
                        klon.querySelector(".ret-kortbeskrivelse").textContent = ret.kortbeskrivelse;
                        klon.querySelector(".ret-pris").textContent = "Pris: " + ret.pris + ",-";


                        display.appendChild(klon);
                    }
                });
            }

            function visModal(retten) {
                let modal = document.querySelector("#modal");
                modal.classList.add("vis");
                modal.querySelector(".modal-navn").textContent = retten.navn;
                modal.querySelector(".modal-billede").src = "small/" + retten.billede + "-sm.jpg";
                retten.billede;
                modal.querySelector(".modal-billede").alt = "Foto af" + retten.navn;


                modal.querySelector(".modal-langbeskrivelse").textContent = retten.langbeskrivelse;


                modal.querySelector("button").addEventListener("click", () => {
                    modal.classList.remove("vis");


                });
            }
        </script>
    </body>

</html>
